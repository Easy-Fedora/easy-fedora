---
description: GNOME Disk і команда mount
---

# Монтування дисків

## **Щоб примонтувати диск через GNOME Диски:**

1. Відкрийте програму **"Диски"**.

<figure><img src="../../.gitbook/assets/obraz (1).png" alt=""><figcaption><p><br></p></figcaption></figure>

2. Виберіть потрібний диск у лівій панелі.

<figure><img src="../../.gitbook/assets/obraz (1) (1).png" alt=""><figcaption></figcaption></figure>

3. Натисніть на розділ, який потрібно примонтувати.
4. Натисніть на кнопку **"Відтворити"** (трикутник внизу).

<figure><img src="../../.gitbook/assets/obraz (2).png" alt=""><figcaption></figcaption></figure>

## Монтування дисків через термінал

Зазвичай монтуванням займаються спеціальні сервіси оболонки, але не завжди вони доступні. І іноді потрібно зробити все вручну, щоб задати додаткові опції монтування або інші параметри. Для монтування в Linux використовується команда `mount`. Розглянемо її параметр

```bash
mount файл_пристрою точка_монтування
```

Або розширений варіант:

```bash
mount опції -t файлова_система -o опції_монтування файл_пристрою точка_монтування
```

Опції задають різні додаткові особливості роботи утиліти. Опція `-t` є необов'язковою, але вона дозволяє вказати файлову систему, яка буде використана, і іноді це дуже корисно. За допомогою опції `-o` можна вказати різні параметри монтування, наприклад, змонтувати лише для читання тощо. Останні два параметри — це файл пристрою, наприклад, `/dev/sda1`, і точка монтування, наприклад, `/mnt`.

**Перед тим як перейти до розгляду прикладів роботи утиліти, давайте розглянемо її основні опції:**

* `-V` — вивести версію утиліти;
* `-h` — вивести довідку;
* `-v` — детальний режим;
* `-a`, `--all` — примонтувати всі пристрої, описані в `fstab`;
* `-F`, `--fork` — створювати окремий екземпляр `mount` для кожного окремого розділу;
* `-f`, `--fake` — не виконувати жодних дій, а лише подивитись, що збирається робити утиліта;
* `-n`, `--no-mtab` — не записувати дані про монтування в `/etc/mtab`;
* `-l`, `--show-labels` — додати мітку диска до точки монтування;
* `-c` — використовувати тільки абсолютні шляхи;
* `-r`, `--read-only` — монтувати розділ тільки для читання;
* `-w`, `--rw` — монтувати для читання і запису;
* `-L`, `--label` — монтувати розділ за міткою;
* `-U`, `--uuid` — монтувати розділ за UUID;
* `-T`, `--fstab` — використовувати альтернативний `fstab`;
* `-B`, `--bind` — монтувати локальну папку;
* `-R`, `--rbind` — перемонтувати локальну папку.

{% hint style="info" %}
Це не всі опції, але основні, які вам знадобляться під час роботи з утилітою.
{% endhint %}

### **Монтування розділів за допомогою команди `mount`:**

Монтування розділів за допомогою команди mount виконується дуже просто. У більшості випадків достатньо використовувати базову версію команди. Наприклад, щоб змонтувати розділ /dev/sdc2 в папку /mnt:

```bash
sudo mount /dev/sdc2 /mnt/
```

<figure><img src="../../.gitbook/assets/obraz (17).png" alt=""><figcaption></figcaption></figure>

У більшості випадків вам доведеться виконувати команду mount з правами суперкористувача, якщо інше не вказано в fstab (опція монтування users). Ви можете подивитися інформацію про процес монтування, додавши опцію -v:

```bash
 sudo mount -v /dev/sdc2 /mnt/
```

<figure><img src="../../.gitbook/assets/obraz (18).png" alt=""><figcaption></figcaption></figure>

Якщо потрібно, ви можете вказати файлову систему за допомогою опції `-t`:

```bash
sudo mount -v -t ext4 /dev/sdc2 /mnt
```

Якщо необхідно змонтувати файлову систему тільки для читання, то ви можете використати опцію `-r` або опцію монтування `-o ro` результат буде однаковим:

```bash
sudo mount -t ext4 -r /dev/sdc2 /mnt
sudo mount -t ext4 -o ro /dev/sdc2 /mnt
```

Ви можете використовувати й інші опції для виконання монтування розділів Linux, наприклад, вказати, що на цьому розділі не можна виконувати програми:

```bash
sudo mount -t ext4 -o noexec /dev/sdc2 /mnt
```

Зверніть увагу, що ви не можете використовувати опції uid, gid, fmask для файлових систем ext. Вони підтримуються тільки в FAT, vFAT, exFAT.

Ви можете використовувати не тільки імена пристроїв для виконання монтування диска в Linux. Для цього можна застосовувати UUID або мітки, наприклад, монтування за допомогою UUID:

```bash
sudo mount --uuid="b386d309-05c1-42c8-8364-8d37270b69e0" /mnt
```

Подивитися UUID для ваших розділів можна за допомогою команди:

```bash
sudo blkid
```

Точно так само ви можете використовувати мітки. Команда монтування диска Linux буде виглядати так:

```bash
mount -L <label> <mount_point>
```

де `<label>` — це мітка розділу, а `<mount_point>` — точка монтування.

**Ви можете змонтувати одну папку в іншу, для цього використовуйте опцію --bind:**

```bash
mount --bind <source_directory> <target_directory>
```

де `<source_directory>` — це директорія, яку ви хочете змонтувати, а `<target_directory>` — це точка, куди буде змонтовано джерело.

**Можливо, не тільки монтування розділів Linux, але й монтування файлів, якщо вони містять файлову систему, наприклад, образи дисків. Монтування образу диска Linux працює точно так само:**

```bash
mount -o loop <image_file> <mount_point>
```

де `<image_file>` — це файл образу диска (наприклад, .iso), а `<mount_point>` — точка монтування. Опція `-o loop` дозволяє монтувати файли як пристрої.

**Подивитися список усіх змонтованих пристроїв можна просто, виконавши команду без параметрів:**

```bash
mount
```

### Розмонтування пристроїв у Linux.

Коли ви хочете завершити роботу з пристроєм, особливо з флешкою, його потрібно розмонтувати. Для цього існує утиліта umount. Як параметри вона приймає точку монтування або пристрій. Наприклад:

```bash
sudo umount /mnt
```

Тепер ваш пристрій не змонтовано. Але іноді може виникнути помилка відключення. Система повідомить, що пристрій зайнятий: umount: /mnt: target is busy.

Проблему можна вирішити, закривши всі програми, які можуть використовувати будь-який файл у цій папці. Які саме це програми можна дізнатися за допомогою команди .

<pre class="language-bash"><code class="lang-bash">lsof.lsof -w /mnt
<strong>lsof -w /dev/sdb6
</strong></code></pre>

<figure><img src="../../.gitbook/assets/obraz (19).png" alt=""><figcaption></figcaption></figure>

Тут ви бачите всю необхідну інформацію, щоб зрозуміти, що відбувається і що з цим робити. Утиліта вивела назву програми, її PID, і навіть файл, з яким вона працює. Ви можете завершити всі програми, а потім знову спробувати або скористатися опцією -l, файлову систему буде відключено негайно, незважаючи на те, що вона зайнята.

```bash
sudo umount -l /mnt
```
